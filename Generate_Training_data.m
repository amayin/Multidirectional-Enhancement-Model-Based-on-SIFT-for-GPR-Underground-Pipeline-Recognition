[TrackInterval,dt,B_scan_image] = readB_scan();
% 画图
figure;
imagesc(B_scan_image);
colormap('gray');
title('The Origin Image')
B_scan_data_gray = (B_scan_image-min(B_scan_image(:)))/...
(max(B_scan_image(:))-min(B_scan_image(:)));
figure;
imshow(B_scan_data_gray,[0,1]);
%% 369数据
CutarrayX=[40,100;100,170;160,280;280,370;380,460;475,570;567,677;675,771;771,862;862,972;972,1057;...
    1057,1140;1140,1234;1234,1317;1317,1460;1460,1606;1606,1737;1737,1860;1860,1997;1997,2117;2117,...
    2240;2240,2364;2364,2483;2483,2603;2603,2737;2737,2863;2863,2988;2988,3123;3123,3256;3256,3365;...
    3365,3513;3564,3691;3691,3821;3821,3937;3951,4056;4078,4183;4183,4285;4297,4393;4393,4501;4501,...
    4615;4634,4751;4751,4853;4853,4947;4947,5051;5051,5147;5147,5232;5232,5313;5313,5390;5390,5477;...
    5477,5568;5568,5673;5690,5786;5786,5874];
CutarrayY=[148,212;156,224;140,255;155,260;150,250;150,260;170,280;170,280;170,280;170,280;170,280;...
    170,280;170,280;170,280;160,280;160,280;160,280;160,280;160,280;160,280;160,280;160,280;160,280;...
    160,280;160,280;160,280;160,280;160,280;160,280;160,280;149,280;149,280;149,280;149,280;157,280;...
    157,280;157,280;157,280;157,280;157,280;157,280;157,280;164,280;164,280;164,280;164,280;164,280;...
    164,280;164,280;164,280;164,280;185,280;185,280];
%% 370数据
% CutarrayX=[34,106;106,172;172,239;239,310;310,372;372,437;437,500;500,562;562,621;621,677;677,730;730,...
%     785;785,831;889,948;948,1005;1005,1056;1056,1111;1111,1164;1164,1226;1226,1281;1281,1341;1341,1399;...
%     1399,1460;1460,1528;1528,1588;1588,1655;1655,1723;1736,1802;1802,1867;1867,1926;1926,1985;1985,2048;...
%     2048,2108;2108,2167;2167,2230;2230,2286;2286,2338;2338,2405;2405,2444];
% CutarrayY=[201,313;201,313;201,313;187,300;187,300;187,300;187,300;187,300;187,300;173,285;173,285;173,...
%     285;173,285;160,285;160,285;160,285;160,285;160,285;155,285;155,285;155,285;155,285;155,285;155,285;...
%     155,285;155,285;147,256;147,256;147,256;147,256;147,256;147,256;147,256;147,256;147,256;147,256;147,...
%     256;147,256;147,256;];
%%
[a,~]=size(CutarrayX);
filepath="D:\硕士文件\gprMAX相关\实测数据\SIFT_extract\SIFT_extract_in_GPR\training_data1\";
for i = 1:a
    Cutimg=B_scan_data_gray(CutarrayY(i,1):CutarrayY(i,2),CutarrayX(i,1):CutarrayX(i,2));
    filename=strcat("training_data_",num2str(i),".mat");
    Fullfilename=strcat(filepath,filename);
%     imwrite(Cutimg,Fullfilename);
    save(Fullfilename,'Cutimg')
end
    
imwrite(B_scan_data_gray,'training_image.jpg') % 保存的double只能在[0,1]范围内